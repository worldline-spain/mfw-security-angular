{"version":3,"sources":["../src/mfw-security.service.js","../src/mfw-security.directives.js"],"names":["SecurityProvider","currentUser","this","$get","$q","$log","$timeout","$rootScope","$mfwSecurityConfig","$injector","_init","storedInfo","storage","get","angular","isDefined","log","userInfo","parser","fromStorage","activate","_activate","validCredentials","result","_notifyLogin","invalidCredentials","clear","_notifyLogout","_logged","user","parse","set","_logout","isUndefined","warn","undefined","_getCurrentUser","_isLogged","_setPermissions","action","permissions","Error","isArray","_","union","difference","_permissions","_hasAny","normalized","_normalizePermission","userPermissions","has","filter","_userHasPermission","length","_refreshAccessToken","accessToken","_notifyUpdateCredentials","_hasAll","isString","split","isObject","permission","negate","perm","charAt","substring","indexOf","_broadcast","EVENT_LOGIN","copy","EVENT_LOGOUT","EVENT_UPDATE_CREDENTIALS","event","data","$broadcast","userInfoParser","$mfwSecurity","init","logged","logout","isLogged","me","setPermissions","refreshAccessToken","hasAnyPermission","hasAllPermissions","SecurityModule","module","run","constant","heartbeatInterval","currentUserGetter","provider","$inject","factory","noop","hasAnyPermissionDirective","$compile","restrict","terminal","priority","compile","tElem","tAttrs","removeAttr","fnName","randomCheckFunctionName","attr","fn","scope","hasAllPermissionsDirective","ifLoggedDirective","ifLoggedOutDirective","suffix","Math","ceil","random","directive"],"mappings":"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","file":"mfw-security.min.js"}