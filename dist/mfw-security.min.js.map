{"version":3,"sources":["../src/mfw-security.service.js","../src/mfw-security.directives.js"],"names":["SecurityProvider","currentUser","this","$get","$q","$log","$timeout","$rootScope","$mfwSecurityConfig","$injector","_init","that","storedInfo","storage","get","initPromise","when","then","storedCredencials","angular","isDefined","log","userInfo","parser","fromStorage","activate","initialized","_isInitialized","_onInitialized","fn","isFunction","_activate","validCredentials","result","_notifyLogin","invalidCredentials","clear","_notifyLogout","_logged","user","parse","set","_logout","isUndefined","warn","undefined","_getCurrentUser","_isLogged","_setPermissions","action","permissions","Error","isArray","_","union","difference","_permissions","_hasAny","normalized","_normalizePermission","userPermissions","has","filter","_userHasPermission","length","_refreshAccessToken","accessToken","_notifyUpdateCredentials","_hasAll","isString","split","isObject","permission","negate","perm","charAt","substring","indexOf","_broadcast","EVENT_LOGIN","copy","EVENT_LOGOUT","EVENT_UPDATE_CREDENTIALS","event","data","$broadcast","userInfoParser","$mfwSecurity","init","isInitialized","onInitialized","logged","logout","isLogged","me","setPermissions","refreshAccessToken","hasAnyPermission","hasAllPermissions","SecurityModule","module","run","constant","heartbeatInterval","currentUserGetter","provider","$inject","factory","noop","hasAnyPermissionDirective","$compile","restrict","terminal","priority","compile","tElem","tAttrs","removeAttr","fnName","randomCheckFunctionName","attr","scope","hasAllPermissionsDirective","ifLoggedDirective","ifLoggedOutDirective","suffix","Math","ceil","random","directive"],"mappings":"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","file":"mfw-security.min.js"}