{"version":3,"sources":["../src/mfw-security.service.js","../src/mfw-security.directives.js"],"names":["SecurityProvider","currentUser","this","$get","$q","$log","$timeout","$rootScope","$mfwSecurityConfig","$injector","_init","that","storedInfo","storage","get","when","then","storedCredencials","angular","isDefined","log","userInfo","parser","fromStorage","activate","initialized","_isInitialized","_activate","validCredentials","result","_notifyLogin","invalidCredentials","clear","_notifyLogout","_logged","user","parse","set","_logout","isUndefined","warn","undefined","_getCurrentUser","_isLogged","_setPermissions","action","permissions","Error","isArray","_","union","difference","_permissions","_hasAny","normalized","_normalizePermission","userPermissions","has","filter","_userHasPermission","length","_refreshAccessToken","accessToken","_notifyUpdateCredentials","_hasAll","isString","split","isObject","permission","negate","perm","charAt","substring","indexOf","_broadcast","EVENT_LOGIN","copy","EVENT_LOGOUT","EVENT_UPDATE_CREDENTIALS","event","data","$broadcast","userInfoParser","$mfwSecurity","init","isInitialized","logged","logout","isLogged","me","setPermissions","refreshAccessToken","hasAnyPermission","hasAllPermissions","SecurityModule","module","run","constant","heartbeatInterval","currentUserGetter","provider","$inject","factory","noop","hasAnyPermissionDirective","$compile","restrict","terminal","priority","compile","tElem","tAttrs","removeAttr","fnName","randomCheckFunctionName","attr","fn","scope","hasAllPermissionsDirective","ifLoggedDirective","ifLoggedOutDirective","suffix","Math","ceil","random","directive"],"mappings":"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","file":"mfw-security.min.js"}