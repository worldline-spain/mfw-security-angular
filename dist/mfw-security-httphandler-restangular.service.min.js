!function(){"use strict";function a(){this.$get=["$injector","$rootScope","$log","$mfwSecurity","$mfwSecurityHttpHandlerConfig","$mfwSecurityConfig",function(a,b,c,d,e,f){function g(){var e=o();angular.forEach(e,function(b){c.debug("Adding error interceptor to restangular service",b);var d=a.get(b);p.push(d),d.setErrorInterceptor(h)}),b.$on(f.EVENT_LOGIN,i),b.$on(f.EVENT_LOGOUT,j),b.$on(f.EVENT_UPDATE_CREDENTIALS,k),d.isLogged()&&m(d.me())}function h(a,b,d){return 401!==a.status||(c.error("Server returned status code "+a.status+". Perform logout."),l(),!1)}function i(a,b){m(b)}function j(){n()}function k(a,b){m(b)}function l(){d.logout()}function m(a){a&&angular.forEach(p,function(b){var c=angular.copy(b.defaultHeaders)||{};c.Authorization=a.accessToken,b.setDefaultHeaders(c)})}function n(){angular.forEach(p,function(a){var b=angular.copy(a.defaultHeaders)||{};delete b.Authorization,a.setDefaultHeaders(b)})}function o(){var a=e.restangularConfig,b=[];return angular.isFunction(a)?b=a():angular.isString(a)?b.push(a):angular.isArray(a)&&(b=b.concat(a)),b}var p=[],q={init:g};return q}]}var b=angular.module("mfw.security.http-handler.restangular",["mfw.security","restangular"]);b.run(["$mfwSecurityHttpHandler",function(a){a.init()}]),b.constant("$mfwSecurityHttpHandlerConfig",{restangularConfig:"Restangular"}),b.provider("$mfwSecurityHttpHandler",a)}();
//# sourceMappingURL=mfw-security-httphandler-restangular.service.min.js.map