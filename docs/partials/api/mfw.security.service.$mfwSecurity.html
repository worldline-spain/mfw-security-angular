<a href="https://github.com/worldline-spain/mfw-security-angular/edit/master/src/mfw-security.service.js" class="improve-docs"><i class="icon-edit"> </i>Improve this doc</a><a href="https://github.com/worldline-spain/mfw-security-angular/blob/88899f0/src/mfw-security.service.js#L164" class="view-source"><i class="icon-eye-open"> </i>View source</a><h1><code ng:non-bindable="">$mfwSecurity</code>
<div><span class="hint">service in module <code ng:non-bindable="">mfw.security</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="mfw-security-service-page mfw-security-service--mfwsecurity-page"><p>Authorization service.</p>
</div></div>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><a href="https://github.com/worldline-spain/mfw-security-angular/blob/88899f0/src/mfw-security.service.js#L262" class="view-source icon-eye-open"> </a><h3 id="methods_activate">activate(userInfo)</h3>
<div class="activate"><div class="mfw-security-service-page mfw-security-service--mfwsecurity-activate-page"><p>Method that checks whether stored credentials from a previous session are still valid or not.</p>
<p>If valid will login with those credentials (and trigger <a href="#/api/mfw.security.service:$mfwSecurity#events_$mfwsecuritylogin"><code>$mfwSecurityLogin</code></a> event),
otherwise will clear stored cache and load a logout session (and trigger
<a href="#/api/mfw.security.service:$mfwSecurity#events_$mfwsecuritylogin"><code>$mfwSecurityLogout</code></a> event).</p>
<p>It checks for stored user credentials in order to activate a previous session.</p>
</div><h5 id="methods_activate_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>userInfo</td><td><a href="" class="label type-hint type-hint-userinfo">UserInfo</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-activate-page"><p>Full <a href="#/api/mfw.security.service:$mfwSecurity#methods_me">user info</a> or stored user credentials.</p>
</div></td></tr></tbody></table></div>
</li>
<li><a href="https://github.com/worldline-spain/mfw-security-angular/blob/88899f0/src/mfw-security.service.js#L442" class="view-source icon-eye-open"> </a><h3 id="methods_hasallpermissions">hasAllPermissions(permissions)</h3>
<div class="hasallpermissions"><h5 id="methods_hasallpermissions_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>permissions</td><td><a href="" class="label type-hint type-hint-string">String</a><a href="" class="label type-hint type-hint-string">String[]</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-hasallpermissions-page"><p>Permissions to check</p>
</div></td></tr></tbody></table><h5 id="methods_hasallpermissions_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-hasallpermissions-page"><p>Whether user has all the specified permissions.</p>
</div></td></tr></table></div>
</li>
<li><a href="https://github.com/worldline-spain/mfw-security-angular/blob/88899f0/src/mfw-security.service.js#L406" class="view-source icon-eye-open"> </a><h3 id="methods_hasanypermission">hasAnyPermission(permissions)</h3>
<div class="hasanypermission"><h5 id="methods_hasanypermission_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>permissions</td><td><a href="" class="label type-hint type-hint-string">String</a><a href="" class="label type-hint type-hint-string">String[]</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-hasanypermission-page"><p>Permissions to check</p>
</div></td></tr></tbody></table><h5 id="methods_hasanypermission_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-hasanypermission-page"><p>Whether user has at least one of the specified permissions.</p>
</div></td></tr></table></div>
</li>
<li><a href="https://github.com/worldline-spain/mfw-security-angular/blob/88899f0/src/mfw-security.service.js#L223" class="view-source icon-eye-open"> </a><h3 id="methods_isinitialized">isInitialized()</h3>
<div class="isinitialized"><div class="mfw-security-service-page mfw-security-service--mfwsecurity-isinitialized-page"><p>Method that returns the initialization status: finished or not.</p>
</div><h5 id="methods_isinitialized_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-boolean">Boolean</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-isinitialized-page"><p>Whether the service is already initialized</p>
</div></td></tr></table></div>
</li>
<li><a href="https://github.com/worldline-spain/mfw-security-angular/blob/88899f0/src/mfw-security.service.js#L353" class="view-source icon-eye-open"> </a><h3 id="methods_islogged">isLogged()</h3>
<div class="islogged"><h5 id="methods_islogged_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-islogged-page"><p>Whether user is currently logged or not</p>
</div></td></tr></table></div>
</li>
<li><a href="https://github.com/worldline-spain/mfw-security-angular/blob/88899f0/src/mfw-security.service.js#L298" class="view-source icon-eye-open"> </a><h3 id="methods_logged">logged(user)</h3>
<div class="logged"><div class="mfw-security-service-page mfw-security-service--mfwsecurity-logged-page"><p>Method that configures a new session with new valid credentials.</p>
<p>This method triggers <a href="#/api/mfw.security.service:$mfwSecurity#events_$mfwsecuritylogin"><code>$mfwSecurityLogin</code></a> event.</p>
</div><h5 id="methods_logged_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>user</td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-logged-page"><p>Logged user. Will be parsed using a user parser. See <a href="#/api/mfw.security.constant:$mfwSecurityConfig#userinfoparser"><code>$mfwSecurityConfig.userInfoParser</code></a>.</p>
</div></td></tr></tbody></table></div>
</li>
<li><a href="https://github.com/worldline-spain/mfw-security-angular/blob/88899f0/src/mfw-security.service.js#L317" class="view-source icon-eye-open"> </a><h3 id="methods_logout">logout()</h3>
<div class="logout"><div class="mfw-security-service-page mfw-security-service--mfwsecurity-logout-page"><p>Method that clears current session.</p>
<p>This method triggers <a href="#/api/mfw.security.service:$mfwSecurity#events_$mfwsecuritylogin"><code>$mfwSecurityLogout</code></a> event.</p>
</div></div>
</li>
<li><a href="https://github.com/worldline-spain/mfw-security-angular/blob/88899f0/src/mfw-security.service.js#L342" class="view-source icon-eye-open"> </a><h3 id="methods_me">me()</h3>
<div class="me"><div class="mfw-security-service-page mfw-security-service--mfwsecurity-me-page"><p><code>UserInfo</code> entity has the following structure:</p>
<ul>
<li>property <code>id</code> (<code>String</code>): User identifier</li>
<li>property <code>accessToken</code> (<code>String</code>): Current session token</li>
<li>property <code>refreshToken</code> (<code>String</code>): Username</li>
<li>property <code>permissions</code> (<code>String[]</code>): User granted roles</li>
</ul>
</div><h5 id="methods_me_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-userinfo">UserInfo</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-me-page"><p>Current logged user</p>
</div></td></tr></table></div>
</li>
<li><a href="https://github.com/worldline-spain/mfw-security-angular/blob/88899f0/src/mfw-security.service.js#L239" class="view-source icon-eye-open"> </a><h3 id="methods_oninitialized">onInitialized(fn)</h3>
<div class="oninitialized"><div class="mfw-security-service-page mfw-security-service--mfwsecurity-oninitialized-page"><p>Method that returns the initializing promise.</p>
</div><h5 id="methods_oninitialized_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>fn <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-function">Function</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-oninitialized-page"><p>Optional callback function to be invoked when initialization is completed.</p>
</div></td></tr></tbody></table><h5 id="methods_oninitialized_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-promise">Promise</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-oninitialized-page"><p>Initializing promise.</p>
</div></td></tr></table></div>
</li>
<li><a href="https://github.com/worldline-spain/mfw-security-angular/blob/88899f0/src/mfw-security.service.js#L421" class="view-source icon-eye-open"> </a><h3 id="methods_refreshaccesstoken">refreshAccessToken(accessToken)</h3>
<div class="refreshaccesstoken"><h5 id="methods_refreshaccesstoken_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>accessToken</td><td><a href="" class="label type-hint type-hint-string">String</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-refreshaccesstoken-page"><p>New access token</p>
</div></td></tr></tbody></table></div>
</li>
</ul>
</div>
<div class="member event"><h2 id="events">Events</h2>
<ul class="events"><li><h3 id="events_$mfwsecuritylogin">$mfwSecurityLogin</h3>
<div class="$mfwsecuritylogin"><div class="mfw-security-service-page mfw-security-service--mfwsecurity-mfwsecuritylogin-page"><p>Event triggered when a new user logs in or when application startes
using previous stored credentials.</p>
</div><div class="inline"><h4 id="events_$mfwsecuritylogin_type">Type:</h4>
<div class="type">broadcast</div>
</div>
<div class="inline"><h4 id="events_$mfwsecuritylogin_target">Target:</h4>
<div class="target">$rootScope</div>
</div>
<h5 id="events_$mfwsecuritylogin_target_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>userInfo</td><td><a href="" class="label type-hint type-hint-userinfo">UserInfo</a></td><td><div class="mfw-security-service-page mfw-security-service--mfwsecurity-mfwsecuritylogin-page"><p>User information.</p>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="events_$mfwsecuritylogout">$mfwSecurityLogout</h3>
<div class="$mfwsecuritylogout"><div class="mfw-security-service-page mfw-security-service--mfwsecurity-mfwsecuritylogout-page"><p>Event triggered when user logs out.</p>
</div><div class="inline"><h4 id="events_$mfwsecuritylogout_type">Type:</h4>
<div class="type">broadcast</div>
</div>
<div class="inline"><h4 id="events_$mfwsecuritylogout_target">Target:</h4>
<div class="target">$rootScope</div>
</div>
</div>
</li>
<li><h3 id="events_$mfwsecurityupdatecredentials">$mfwSecurityUpdateCredentials</h3>
<div class="$mfwsecurityupdatecredentials"><div class="mfw-security-service-page mfw-security-service--mfwsecurity-mfwsecurityupdatecredentials-page"><p>Event triggered when user credentials (roles) are updated.</p>
</div><div class="inline"><h4 id="events_$mfwsecurityupdatecredentials_type">Type:</h4>
<div class="type">broadcast</div>
</div>
<div class="inline"><h4 id="events_$mfwsecurityupdatecredentials_target">Target:</h4>
<div class="target">$rootScope</div>
</div>
</div>
</li>
</ul>
</div>
</div>
